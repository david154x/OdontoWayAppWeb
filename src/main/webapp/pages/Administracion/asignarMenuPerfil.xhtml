<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="jakarta.faces.facelets"
				xmlns:f="jakarta.faces.core"
				xmlns:h="jakarta.faces.htjml"
				xmlns:p="http://primefaces.org/ui"
				template="/WEB-INF/layouts/modulTemplate.xhtml">
				
	<ui:param name="view" value="#{asignarMenuPerfilView}" />
	<ui:param name="idLegend" value="Modulo Asignar Menu Perfil" />
	<ui:param name="idFieldSet" value="flAsignarMenuPerfil" />
	<ui:param name="iconModul" value="fa-solid fa-users-gear" />
	
	<ui:define name="contenidoModulo">
	
		<h:form id="formAsignarMenuPerfil">
	
			<p:panelGrid columns="2" >
				
				<p:outputLabel value="Busqueda perfil:" />
				<p:autoComplete id="buscarPerfil" 
	                        	value="#{asignarMenuPerfilView.perfilBusqueda}" 
	                        	completeMethod="#{asignarMenuPerfilView.autocompletarPerfiles}" 
	                        	var="perfil" 
	                        	itemLabel="#{perfil.nombrePerfil}" 
	                        	itemValue="#{perfil}"
	                        	converter="perfilConverter"
	                        	forceSelection="true">
	                        	
	           		<p:ajax event="itemSelect" listener="#{asignarMenuPerfilView.cargarMenuPerfil()}" process="@this" />
	           		            	
	            </p:autoComplete>
				
			</p:panelGrid>
			
			<br />
	
			<p:pickList id="pickListMenu" 
			            value="#{asignarMenuPerfilView.menusDualList}" 
			            var="menu" 
			            itemLabel="#{menu.nombreMenu}" 
			            itemValue="#{menu}"
			            converter="menuConverter"
			            showSourceControls="true" 
			            showTargetControls="true"
			            showCheckbox="true" 
			            responsive="true"
			            filter="true" 
			            filterMatchMode="contains"
			            styleClass="pickListGenerico">
			    <f:facet name="sourceCaption">Disponibles</f:facet>
            	<f:facet name="targetCaption">Asignados</f:facet>
			</p:pickList>
			            
			<br />
			<p:separator />
			<br />
			
			<div align="right">

				<p:commandButton id="btnGuardarCambios" value="Guardar cambios" process="@this pickListMenu"
								 title="Guardar cambios" styleClass="btnUpd"
								 icon="fa fa-pencil-square" actionListener="#{asignarMenuPerfilView.guardarMenusAsignadosPerfil()}"
								  />
			</div>
			
			<br />
			
		</h:form>
		
	</ui:define>
	
</ui:composition>